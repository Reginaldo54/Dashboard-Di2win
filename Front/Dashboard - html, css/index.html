<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Front - Dashboard</title>    
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">

</head>
<body>
    <div class="container">
        <aside>

            <div class="top">
                <div class="logo">
                    <img src="" alt="">
                    <h1>Di2win</h1>
                </div>
                <div class="close" id="close-btn">
                    <span class="material-icons-sharp">close</span>
                </div>
            </div>
            
            <div class="sidebar">

                <a href="./bar-chart.html" class="active">
                    <span class="material-icons-sharp">bar_chart</span>
                    <h3>Grafíco de barra</h3>
                </a>

                <a href="./pie-chart.html">
                    <span class="material-icons-sharp">pie_chart</span>
                    <h3>Gráfico de torta</h3>
                </a>

                <a href="">
                </a>

            </div>
            
        </aside>

        <main>

            
            <h1 class="title">Gráfico de Barra</h1>
            <div>
              <canvas id="myChart"></canvas>
            </div>
            
            <!-- Adicione um formulário para os filtros -->
            <form id="filterForm">
              <label for="monthSelect">Mês:</label>
              <select id="monthSelect">
                <option value="0">Mês</option>
                <option value="1">Janeiro</option>
                <option value="2">Fevereiro</option>
                <option value="3">Março</option>
                <option value="4">Abril</option>
                <option value="5">Maio</option>
                <option value="6">Junho</option>
                <option value="7">Julho</option>
                <option value="8">Agosto</option>
                <option value="9">Setembro</option>
                <option value="10">Outubro</option>
                <option value="11">Novembro</option>
                <option value="12">Dezembro</option>
                <!-- ... Adicione os outros meses -->
              </select>
            
              <!-- Adicione mais filtros conforme necessário (dia, hora, usuário, tipo de documento) -->
            
              <button type="submit">Atualizar</button>
            </form>
            
                         </main>

        <!--END OF MAIN-->
    <script src="script.js"></script>
    <script src="TesteBack/extractUser.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            
    <script>
    fetchData();
    console.log("Logado");

    
        const ctx = document.getElementById('myChart').getContext('2d');
// Seus dados de exemplo
const dadosPorMes = {
  1: 10, // Janeiro
  2: 20, // Fevereiro
  // Adicione os outros meses
};




let myChart;

function updateChart(month) {
  const data = month === '0' ? // Se 'Todos' estiver selecionado
    Object.values(dadosPorMes).reduce((acc, curr) => acc.concat(curr), []) // Concatena todos os dados
    :
    dadosPorMes[month]; // Seleciona os dados do mês específico

  if (myChart) {
    myChart.destroy();
  }

  myChart = new Chart(ctx, {
    type: 'bar',
    data: {
//      labels: ['Dado 1', 'Dado 2', 'Dado 3', 'Dado 4'],
labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'], // Labels para os dias do mês selecionado 
datasets: [{
        label: 'Dados por Mês',
        data: data,
        backgroundColor: 'rgba(54, 162, 235, 0.2)',
        borderColor: 'rgba(54, 162, 235, 1)',
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });

  
}

document.getElementById('filterForm').addEventListener('submit', function(event) {
  event.preventDefault();
  const month = document.getElementById('monthSelect').value;
  updateChart(month);
});

updateChart('0'); // Exibe todos os dados inicialmente

    </script>                     
</body>
</html>